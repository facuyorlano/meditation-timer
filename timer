<div style="font-family: 'Segoe UI', sans-serif; max-width: 400px; margin: 40px auto; padding: 30px; background: #f5fdf6; border-radius: 20px; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1); text-align: center; transition: all 0.3s ease;">
  <h2 style="font-size: 24px; color: #2c3e50; margin-bottom: 10px;">ğŸ§˜â€â™‚ï¸ Tiempo de meditaciÃ³n chashma</h2>
  <label style="font-size: 16px; display: block; margin-bottom: 10px;">DuraciÃ³n (en minutos):</label>
  <input id="customMinutes" type="number" min="1" max="180" value="10" style="padding: 8px; font-size: 16px; border-radius: 10px; border: 1px solid #ccc; width: 80px; text-align: center; margin-bottom: 20px;">
  <div id="timer" style="font-size: 48px; color: #27ae60; margin: 20px 0;">10:00</div>
  <div style="margin-top: 10px;">
    <button onclick="startTimer()" style="margin: 0 5px; padding: 10px 20px; font-size: 16px; border: none; border-radius: 10px; background-color: #2ecc71; color: white; cursor: pointer;">Iniciar</button>
    <button onclick="pauseTimer()" style="margin: 0 5px; padding: 10px 20px; font-size: 16px; border: none; border-radius: 10px; background-color: #f1c40f; color: white; cursor: pointer;">Pausar</button>
    <button onclick="resetTimer()" style="margin: 0 5px; padding: 10px 20px; font-size: 16px; border: none; border-radius: 10px; background-color: #e74c3c; color: white; cursor: pointer;">Reiniciar</button>
  </div>
  <audio id="gong" preload="auto">
    <source src="https://cdn.pixabay.com/audio/2022/03/22/audio_8fc423c1b1.mp3" type="audio/mp3">
  </audio>
</div>

<script>
  let timer = 600;
  let interval = null;

  const display = document.getElementById("timer");
  const gong = document.getElementById("gong");
  const input = document.getElementById("customMinutes");

  function updateDisplay() {
    const minutes = Math.floor(timer / 60);
    const seconds = timer % 60;
    display.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
  }

  function playGong() {
    gong.currentTime = 0;
    gong.play().catch(e => console.log("Error al reproducir el gong:", e));
  }

  function startTimer() {
    if (interval) return;

    let minutes = parseInt(input.value);
    if (isNaN(minutes) || minutes < 1) minutes = 1;
    if (minutes > 180) minutes = 180;

    timer = minutes * 60;
    updateDisplay();
    playGong(); // Gong al inicio

    interval = setInterval(() => {
      if (timer > 0) {
        timer--;
        updateDisplay();
      } else {
        clearInterval(interval);
        interval = null;
        playGong(); // Gong al finalizar
        alert("ğŸ™ Tiempo finalizado. NamastÃ©.");
      }
    }, 1000);
  }

  function pauseTimer() {
    clearInterval(interval);
    interval = null;
  }

  function resetTimer() {
    pauseTimer();
    timer = parseInt(input.value) * 60 || 600;
    updateDisplay();
  }

  updateDisplay();
</script>
